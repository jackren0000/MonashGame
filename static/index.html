<!DOCTYPE html>
<html>
<head>
    <title>Monash University Adventure</title>
</head>
<body>
    <h1>Welcome to the Monash University Adventure!</h1>
    <p>Either choose a building image or text action,  start with an building image first.</p>
    <p>Right now supports 3 buildings which are Matheson library, Hargrave library and Menzies building.</p>
    <p>When enter the action, remember to unselected the photo(click choose file and select nothing).</p>
    <form id="upload-form">
        <input type="file" id="image-upload">
        <input type="text" id="action-input" placeholder="Enter action">
        <button type="submit">Submit</button>
    </form>
    <p id="building-name"></p>
    <div id="story-container"></div>
    
    <script>
        document.getElementById('upload-form').addEventListener('submit', function(e) {
            e.preventDefault();
            var formData = new FormData();
            formData.append('file', document.getElementById('image-upload').files[0]);
            formData.append('action', document.getElementById('action-input').value)

            fetch('http://20.231.19.181:8000/predict', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('building-name').textContent = "You are inside the building: " + data['building_name'];

                // Create a new <p> element for the new part of the story
                var newStoryPart = document.createElement('p');
                newStoryPart.textContent = "Story: " + data['story'];

                // Append the new story part to the story container
                document.getElementById('story-container').appendChild(newStoryPart);
     
            })
            .catch(error => {
                console.error(error);
            });
        });
    </script>
</body>
</html>
